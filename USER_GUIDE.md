# 🏀 Fantasy Basketball Analyzer 使用教學

完整的使用指南 - 從入門到精通

---

## 📋 目錄

1. [快速開始](#快速開始)
2. [核心功能](#核心功能)
3. [實際使用案例](#實際使用案例)
4. [進階技巧](#進階技巧)
5. [常見問題](#常見問題)

---

## 🚀 快速開始

### 系統已經設定完成！

你的系統現在包含：
- ✅ Yahoo API 認證完成
- ✅ 連接到你的聯盟「大亂鬥」(ID: 71325)
- ✅ Access Token 已獲取並儲存
- ✅ 所有分析引擎已就緒

### 第一次使用

```bash
cd /Users/murs/Documents/fantasy-basketball-analyzer
python3 src/main.py
```

你會看到一個選單：
```
請選擇要執行的範例:
1. 獲取聯盟數據
2. 分析陣容優劣勢
3. 評估交易影響
4. 球員價值排名
0. 退出
```

---

## 🎯 核心功能

### 功能 1: 獲取聯盟數據

**作用：** 查看你的聯盟基本資訊和排名

**執行方式：**
```bash
python3 src/main.py
# 輸入: 1
```

**你會看到：**
```
聯盟名稱: 大亂鬥
隊伍數量: 14
當前週次: 5

聯盟排名:
  Alex's Agreeable Team: 1名
  大土豆包莖: 2名
  2GETHER: 3名
  ...
```

**適合什麼時候用：**
- 檢查當前週次
- 查看排名變化
- 確認系統連接正常

---

### 功能 2: 分析陣容優劣勢 ⭐ 最重要

**作用：** 深入分析你的陣容在 9 個類別的表現

**執行方式：**
```bash
python3 src/main.py
# 輸入: 2
```

**系統會告訴你：**

#### ✅ 優勢類別 (Strong)
你的陣容在哪些類別很強，可以贏對手
```
優勢類別: 3PM, FT%, ST, A/T, PTS
```

#### ❌ 劣勢類別 (Punt)
你的陣容在哪些類別太弱，建議放棄
```
劣勢類別: FG%, REB, DD
```

#### 📊 類別總計
你的陣容各類別的總數據
```
類別總計:
  FG%: 0.485
  FT%: 0.810
  3PM: 658
  PTS: 7800
  REB: 2350
  AST: 2100
  ST: 380
  BLK: 245
  TO: 850
```

#### 💡 改善建議
系統會給你具體建議
```
改善建議:
  [High] 優勢類別只有 4 個，需要至少 5 個才能穩定贏球
  建議: 透過交易補強弱勢類別

  [Medium] FG% 嚴重偏低
  建議: 交易掉低命中率後衛，換取高效率大前鋒/中鋒
```

**適合什麼時候用：**
- 選秀後第一次分析
- 每週對戰前評估實力
- 決定要不要做交易
- 找出陣容問題

---

### 功能 3: 評估交易影響 ⭐ 超實用

**作用：** 評估一筆交易對你陣容的影響

**執行方式：**
```bash
python3 src/main.py
# 輸入: 3
```

**系統會模擬交易並告訴你：**

#### 📈 哪些類別會變強
```
改善類別:
  FG%: 0.485 → 0.512 (+0.027) ✅
  REB: 2350 → 2900 (+550) ✅
  DD: 45 → 75 (+30) ✅
```

#### 📉 哪些類別會變弱
```
損失類別:
  3PM: 658 → 448 (-210) ❌
  PTS: 7800 → 7600 (-200) ❌
```

#### ✅ 建議 Accept / Reject
```
總評: Favorable
原因: 改善了 5 個類別，只損失 2 個類別
建議: Accept
```

**範例交易分析：**

假設你想送出 **Donovan Mitchell**，換來 **Domantas Sabonis**

**分析結果：**
```
送出: Donovan Mitchell
換來: Domantas Sabonis

類別影響:
  FG%: +0.119 ✅ (Mitchell .463 → Sabonis .583)
  REB: +650 ✅ (Mitchell 250 → Sabonis 900)
  DD: +40 ✅ (Mitchell 0 → Sabonis 40)
  3PM: -210 ❌ (Mitchell 230 → Sabonis 20)
  PTS: -200 ❌ (Mitchell 1800 → Sabonis 1600)

建議: Accept
理由: 補強了你最弱的 FG% 和 REB，犧牲的 3PM 你還有其他球員可以補
```

**適合什麼時候用：**
- 有人跟你提出交易
- 你想主動提出交易
- 評估撿自由球員的價值

---

### 功能 4: 球員價值排名

**作用：** 看所有球員在 9-Cat 系統中的價值排名

**執行方式：**
```bash
python3 src/main.py
# 輸入: 4
```

**你會看到：**
```
球員排名:

#1 Nikola Jokić (DEN)
  總價值: 8.45
  優勢類別: FG%, PTS, REB, AST, BLK

#2 Giannis Antetokounmpo (MIL)
  總價值: 8.12
  優勢類別: FG%, PTS, REB, ST, BLK

#3 Luka Dončić (DAL)
  總價值: 7.89
  優勢類別: PTS, REB, AST, ST
```

**適合什麼時候用：**
- 選秀時參考
- 評估交易價值
- 撿自由球員時比較

---

## 💼 實際使用案例

### 案例 1: 選秀後第一次分析

**場景：** 你剛選完秀，想知道陣容強弱

**步驟：**
1. 執行 `python3 src/main.py`
2. 選擇選項 `2` (分析陣容)
3. 查看報告

**你的陣容分析結果：**
```
隊伍名稱: 我的隊伍
陣容人數: 12 人 (10 健康 + 2 傷兵)

優勢類別 (5個): 3PM, FT%, ST, A/T, PTS
劣勢類別 (3個): FG%, REB, DD

戰略分析:
✅ 可以贏: 3PM, FT%, ST, A/T, PTS (5/9)
❌ 會輸: FG%, REB, DD (3/9)
⚖️ 拉鋸: BLK (1/9)

結論: 你的陣容是「外線流 + Punt 籃板」策略
      每週只要確保 5 個優勢類別正常發揮就能贏
```

**接下來該做什麼：**
- ✅ 優勢類別 ≥ 5 個：陣容平衡，可以開打
- ⚠️ 優勢類別 < 5 個：需要交易補強

---

### 案例 2: 評估實際交易

**場景：** 有人提出交易

**對方提議：**
```
他送出: Sabonis
你送出: Mitchell + Suggs
```

**分析步驟：**
1. 執行 `python3 src/main.py`
2. 選擇選項 `3` (評估交易)
3. 輸入交易內容

**系統分析：**
```
交易方案:
  送出: Donovan Mitchell, Jalen Suggs
  換來: Domantas Sabonis

類別影響:
  FG%: +0.134 ✅ (補強最弱項!)
  REB: +650 ✅
  AST: +130 ✅
  DD: +40 ✅
  3PM: -366 ❌ (但你還有 Beal, Lonzo, Cam Johnson)
  PTS: -750 ❌
  ST: -141 ❌

總評: Favorable
建議: Accept

理由:
1. 補強了你最弱的 FG% 和 REB
2. 雖然損失 3PM 和 ST，但你的其他球員可以彌補
3. 這個交易讓你的優勢類別從 5 個變 6 個
4. 從「勉強贏」變成「穩定贏」
```

**決策：** Accept 這筆交易！

---

### 案例 3: 自由球員撿人

**場景：** 自由球員市場有人可撿，不知道誰比較好

**可用球員：**
- Daniel Gafford (C)
- Aaron Gordon (PF)
- Lonzo Ball (PG) - 你想砍掉

**分析步驟：**

**選項 A: 用 Lonzo 換 Gafford**
```
執行分析:

影響:
  FG%: +0.324 ✅ (Lonzo .385 → Gafford .709)
  REB: +171 ✅
  3PM: -102 ❌
  A/T: -3.0 ❌

建議: Accept
理由: Lonzo 的 .385 FG% 是毒藥，必須清掉
```

**選項 B: 用 Lonzo 換 Aaron Gordon**
```
執行分析:

影響:
  FG%: +0.138 ✅
  REB: +185 ✅
  PTS: +497 ✅
  3PM: -102 ❌

建議: Accept
理由: Gordon 全方位更好，進攻和防守都有貢獻
```

**決策：** 選 Aaron Gordon（更全面）

---

## 🔧 進階技巧

### 技巧 1: 自定義類別權重

如果你覺得某些類別更重要，可以調整權重：

編輯 `src/analysis/category_scorer.py`:
```python
DEFAULT_WEIGHTS = {
    'FG%': 1.5,  # 提高 FG% 的重要性
    'FT%': 1.0,
    '3PM': 1.3,  # 你們聯盟很重視三分
    'PTS': 1.0,
    'REB': 0.8,  # 降低籃板的重要性（Punt策略）
    'AST': 1.0,
    'ST': 1.2,
    'BLK': 1.0,
    'TO': -1.0
}
```

### 技巧 2: 匯出報告

想把分析結果存成檔案？

修改 `src/main.py`，在分析後加入：
```python
import json

# 儲存報告
with open('data/exports/roster_report.json', 'w') as f:
    json.dump(report, f, indent=2, ensure_ascii=False)

print("報告已儲存至: data/exports/roster_report.json")
```

### 技巧 3: 週對戰預測

想知道下週會不會贏？

**手動步驟：**
1. 分析你的陣容（功能 2）
2. 記下你的優勢類別（例如：3PM, FT%, ST, PTS, A/T）
3. 查看下週對手
4. 分析對手的陣容
5. 比較你們的優勢類別

**勝率預測：**
- 你的優勢類別 ≥ 5 個 → 贏面大
- 你的優勢類別 = 4 個 → 五五開
- 你的優勢類別 ≤ 3 個 → 危險

---

## ❓ 常見問題

### Q1: Token 過期怎麼辦？

**症狀：** 執行時出現 `401 Unauthorized`

**解決方法：**
```bash
# 重新獲取授權網址
python3 get_auth_url.py

# 在瀏覽器授權後，取得新的授權碼
# 修改 complete_auth.py 中的授權碼
# 重新執行
python3 complete_auth.py
```

Token 有效期是 1 小時，之後會自動用 refresh token 更新。

---

### Q2: 如何更新球員數據？

**Yahoo API 的數據是即時的！**

每次執行程式都會獲取最新數據，包括：
- 最新的比賽數據
- 傷病狀態
- 交易異動

**無需手動更新！**

---

### Q3: 分析結果不準確？

**可能原因：**

1. **League ID 錯誤**
   - 檢查 `config/credentials.json` 中的 `league_id`
   - 確認是 `71325`

2. **賽季設定錯誤**
   - 確認 `season` 是 `2025`

3. **球員數據不完整**
   - 新秀或剛交易的球員可能數據較少
   - 等幾場比賽後會更準確

---

### Q4: 我想分析特定週次的數據

修改 API 請求：

```python
# 在 yahoo_client.py 中
def get_team_stats_by_week(self, team_id, week):
    return self.yahoo_query.get_team_stats_by_week(team_id, week)
```

---

### Q5: 系統說我應該放棄某類別，但我不想放棄

**這是正常的！**

系統的「Punt 建議」只是根據數據分析。最終決策權在你：

**考慮因素：**
- 你的對戰策略
- 未來的交易計畫
- Keeper 球員的潛力
- 個人喜好

**系統只是工具，你才是主人！**

---

## 🎓 學習資源

### 深入理解 Z-Score

Z-Score 是什麼？
```
Z = (X - μ) / σ

X = 球員數據
μ = 聯盟平均
σ = 標準差
```

**範例：**
- Giannis FG% 0.571，聯盟平均 0.480，標準差 0.040
- Z-Score = (0.571 - 0.480) / 0.040 = 2.275
- 意思：Giannis 的 FG% 比聯盟平均高 2.275 個標準差（非常強）

---

## 🚀 下一步

你現在已經完全了解系統了！

**建議你立即做：**
1. 分析你的陣容（功能 2）
2. 看看系統給你什麼建議
3. 考慮是否需要交易

**記得：**
- 每週對戰前執行一次分析
- 有交易提議時立即評估
- 自由球員市場有好貨時比較價值

**祝你奪冠！** 🏆🏀
